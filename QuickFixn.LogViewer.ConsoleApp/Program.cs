using QuickFixn.Converters;
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Text;
using System.Threading;
using System.Threading.Tasks;
using System.Xml.Linq;
using FIXDictionary = QuickFix.DataDictionary;
using QuickFixn.LogFileProcessor;
using System.Security.Permissions;

namespace QuickFixn.LogViewer.ConsoleApp
{
	class Program
	{

		private const string sFIXDictionary = @"..\..\..\Dictionary\FIX50SP2.xml";

		private static void Test1()
		{
			List<string> testData = new List<string>
			{
				@"8=FIXT.1.19=104235=R34=1849=MA52=20160616-15:11:53.12856=MDGSTAPI131=QuoteReqID-1466089913128-363083146=155=[N/A]48=283483HV022=16360=Education454=1455=US283483HV04456=420200=120201=220202=120203=100.5850000020204=80020205=320206=Unassigned Bonds460=111227=BOND29703=MNPX167=NONE541=20181201225=20061102223=0.05106=EL PASO CNTY COLO SCH DIST NO 49 FALCON GO REF BDS 2006B107=EL PASO CNTY COLO SCH DIST NO 49 FALCON  5.000 12/1/18873=2006110254=238=80000064=2016062115=USD1=TEST660=99581=162=20160616-15:45:00126=20160616-15:15:0060=20160616-15:11:53423=1453=5448=mdgsclt01447=D452=11802=1523=MDGS Client 1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1758=RGNL (N/A) requests  offer on $800,000 283483HV0, due at 11:15 AM EDT, Single-Dealer, .5625=220117=36883155961=MNPrice5626=55215=Y5627=Submitted5630=Respond, Pass20120=C2D-RFQ-Open21031=N21032=N20066=368831420067=120013=0.0110=147",
				@"8=FIXT.1.19=31935=S34=1849=MDGSTAPI52=20160616-15:11:53.51156=MA22=138=80048=cusip54=255=N/A117=order_123131=QuoteReqID-1466089913128-363083133=100.58500000135=800423=1460=11537=15626=46886=12020120=C2D-RFQ-Open453=4448=MDGS447=C452=1448=mdgstest447=D452=12448=ML-PEND447=C452=12448=ML-PEND447=C452=1210=061",
				@"8=FIXT.1.19=14735=j34=1949=MA52=20160616-15:11:53.58256=MDGSTAPI45=18372=S379=order_123380=058=Invalid MarketAxess InquiryID20117=-120120=C2D-RFQ-Open10=221",
				@"8=FIXT.1.19=81735=AI34=2349=MA52=20160616-15:13:48.37556=MDGSTAPI453=5448=mdgsclt01447=D452=11802=1523=MDGS Client 1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1755=[N/A]48=283483HV022=16360=Education454=1455=US283483HV04456=4460=111227=BOND29703=MNPX167=NONE541=20181201225=20061102223=0.05106=EL PASO CNTY COLO SCH DIST NO 49 FALCON GO REF BDS 2006B107=EL PASO CNTY COLO SCH DIST NO 49 FALCON  5.000 12/1/18873=2006110254=238=80000064=2016062115=USD1=TEST660=99581=1423=160=20160616-15:13:48297=1758=RGNL (N/A) has cancelled the Offer List20117=36883155626=55627=Client CXL5630=None20120=C2D-RFQ-Open20066=368831420013=0.015215=Y5625=25961=MNPrice21031=N21032=N10=081",
				@"8=FIXT.1.19=104035=R34=3349=MA52=20160616-15:18:41.04856=MDGSTAPI131=QuoteReqID-1466090321040-13984146=155=[N/A]48=283483HV022=16360=Education454=1455=US283483HV04456=420200=120201=220202=120203=99.5500000020204=80020205=320206=Unassigned Bonds460=111227=BOND29703=MNPX167=NONE541=20181201225=20061102223=0.05106=EL PASO CNTY COLO SCH DIST NO 49 FALCON GO REF BDS 2006B107=EL PASO CNTY COLO SCH DIST NO 49 FALCON  5.000 12/1/18873=2006110254=238=80000064=2016062115=USD1=TEST660=99581=162=20160616-15:50:00126=20160616-15:20:0060=20160616-15:18:41423=1453=5448=mdgsclt01447=D452=11802=1523=MDGS Client 1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1758=RGNL (N/A) requests  offer on $800,000 283483HV0, due at 11:20 AM EDT, Multi-Dealers, .5625=220117=36883385961=MNPrice5626=55215=Y5627=Submitted5630=Respond, Pass20120=C2D-RFQ-Open21031=N21032=N20066=368833720067=120013=0.0110=070",
				@"8=FIXT.1.19=31735=S34=3249=MDGSTAPI52=20160616-15:18:41.08156=MA22=138=80048=cusip54=255=N/A117=order_123131=QuoteReqID-1466090321040-13984133=99.55000000135=800423=1460=11537=15626=46886=12020120=C2D-RFQ-Open453=4448=MDGS447=C452=1448=mdgstest447=D452=12448=ML-PEND447=C452=12448=ML-PEND447=C452=1210=210",
				@"8=FIXT.1.19=14735=j34=3449=MA52=20160616-15:18:41.10356=MDGSTAPI45=32372=S379=order_123380=058=Invalid MarketAxess InquiryID20117=-120120=C2D-RFQ-Open10=207",
				@"8=FIXT.1.19=81935=AI34=3749=MA52=20160616-15:20:00.08756=MDGSTAPI453=5448=mdgsclt01447=D452=11802=1523=MDGS Client 1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1755=[N/A]48=283483HV022=16360=Education454=1455=US283483HV04456=4460=111227=BOND29703=MNPX167=NONE541=20181201225=20061102223=0.05106=EL PASO CNTY COLO SCH DIST NO 49 FALCON GO REF BDS 2006B107=EL PASO CNTY COLO SCH DIST NO 49 FALCON  5.000 12/1/18873=2006110254=238=80000064=2016062115=USD1=TEST660=99581=1126=20160616-15:50:00423=160=20160616-15:20:00297=758=MDGS has failed to respond20117=36883385626=55627=Live5630=None20120=C2D-RFQ-Open20066=368833720013=0.015215=Y5625=25961=MNPrice21031=N21032=N10=250",
				@"8=FIXT.1.19=80835=AI34=3849=MA52=20160616-15:20:00.09256=MDGSTAPI453=5448=mdgsclt01447=D452=11802=1523=MDGS Client 1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1755=[N/A]48=283483HV022=16360=Education454=1455=US283483HV04456=4460=111227=BOND29703=MNPX167=NONE541=20181201225=20061102223=0.05106=EL PASO CNTY COLO SCH DIST NO 49 FALCON GO REF BDS 2006B107=EL PASO CNTY COLO SCH DIST NO 49 FALCON  5.000 12/1/18873=2006110254=238=80000064=2016062115=USD1=TEST660=99581=1126=20160616-15:50:00423=160=20160616-15:20:00297=1758=TIMED-OUT20117=36883385626=55627=Timed Out5630=None20120=C2D-RFQ-Open20066=368833720013=0.015215=Y5625=25961=MNPrice21031=N21032=N10=079",
				@"8=FIXT.1.19=94735=R34=14849=MA52=20160616-16:15:06.96656=MDGSTAPI131=QuoteReqID-1466093706966-160761146=155=[N/A]48=274146BV022=16360=Education454=1455=US274146BV08456=4460=111227=BOND29703=MNPX167=NONE541=20210201225=19980408223=0.0106=EAST ORANGE N J BRD ED CTFS PARTN COPS 1998107=EAST ORANGE N J BRD ED CTFS PARTN COPS 1 0.000 2/1/21873=1998040854=138=5000064=2016062115=USD1=TEST660=99581=162=20160616-16:19:00126=20160616-16:17:0060=20160616-16:15:06423=1453=5448=rbcstpcl1447=D452=11802=1523=RBC Test STP Client1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1758=RGNL (N/A) requests  bid on $50,000 274146BV0, due at 12:17 PM EDT, Multi-Dealers, .5625=220117=36884095961=MNPrice5626=55215=Y5627=Submitted5630=Respond, Pass20120=C2D-RFQ-Open21031=N21032=N20066=368840820067=120013=0.0110=150",
				@"8=FIXT.1.19=81135=AI34=15249=MA52=20160616-16:17:00.07556=MDGSTAPI453=5448=rbcstpcl1447=D452=11802=1523=RBC Test STP Client1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1755=[N/A]48=274146BV022=16360=Education454=1455=US274146BV08456=4460=111227=BOND29703=MNPX167=NONE541=20210201225=19980408223=0.0106=EAST ORANGE N J BRD ED CTFS PARTN COPS 1998107=EAST ORANGE N J BRD ED CTFS PARTN COPS 1 0.000 2/1/21873=1998040854=138=5000064=2016062115=USD1=TEST660=99581=1126=20160616-16:19:00423=160=20160616-16:17:00297=758=MDGS has failed to respond20117=36884095626=55627=Live5630=None20120=C2D-RFQ-Open20066=368840820013=0.015215=Y5625=25961=MNPrice21031=N21032=N10=061",
				@"8=FIXT.1.19=80035=AI34=15349=MA52=20160616-16:17:00.26256=MDGSTAPI453=5448=rbcstpcl1447=D452=11802=1523=RBC Test STP Client1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1755=[N/A]48=274146BV022=16360=Education454=1455=US274146BV08456=4460=111227=BOND29703=MNPX167=NONE541=20210201225=19980408223=0.0106=EAST ORANGE N J BRD ED CTFS PARTN COPS 1998107=EAST ORANGE N J BRD ED CTFS PARTN COPS 1 0.000 2/1/21873=1998040854=138=5000064=2016062115=USD1=TEST660=99581=1126=20160616-16:19:00423=160=20160616-16:17:00297=1758=TIMED-OUT20117=36884095626=55627=Timed Out5630=None20120=C2D-RFQ-Open20066=368840820013=0.015215=Y5625=25961=MNPrice21031=N21032=N10=148",
				@"8=FIXT.1.19=93435=R34=18649=MA52=20160616-16:33:11.21556=MDGSTAPI131=QuoteReqID-1466094791214-315125146=155=[N/A]48=971567LZ322=16360=Various Purpose454=1455=US971567LZ37456=4460=111227=BOND29703=MNPX167=NONE541=20251201225=20080626223=0.04375106=WILMINGTON DEL GO BDS 2008-A107=WILMINGTON DEL GO BDS 2008-A 4.375 12/1/25873=2008062654=138=10000064=2016062115=USD1=TEST660=99581=162=20160616-16:37:00126=20160616-16:35:0060=20160616-16:33:11423=1453=5448=rbcstpcl1447=D452=11802=1523=RBC Test STP Client1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1758=RGNL (N/A) requests  bid on $100,000 971567LZ3, due at 12:35 PM EDT, Multi-Dealers, .5625=220117=36884415961=MNPrice5626=55215=Y5627=Submitted5630=Respond, Pass20120=C2D-RFQ-Open21031=N21032=N20066=368844020067=120013=0.01510=203",
				@"8=FIXT.1.19=79735=AI34=19049=MA52=20160616-16:35:00.16356=MDGSTAPI453=5448=rbcstpcl1447=D452=11802=1523=RBC Test STP Client1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1755=[N/A]48=971567LZ322=16360=Various Purpose454=1455=US971567LZ37456=4460=111227=BOND29703=MNPX167=NONE541=20251201225=20080626223=0.04375106=WILMINGTON DEL GO BDS 2008-A107=WILMINGTON DEL GO BDS 2008-A 4.375 12/1/25873=2008062654=138=10000064=2016062115=USD1=TEST660=99581=1126=20160616-16:37:00423=160=20160616-16:35:00297=758=MDGS has failed to respond20117=36884415626=55627=Live5630=None20120=C2D-RFQ-Open20066=368844020013=0.0155215=Y5625=25961=MNPrice21031=N21032=N10=091",
				@"8=FIXT.1.19=78635=AI34=19149=MA52=20160616-16:35:00.16756=MDGSTAPI453=5448=rbcstpcl1447=D452=11802=1523=RBC Test STP Client1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1755=[N/A]48=971567LZ322=16360=Various Purpose454=1455=US971567LZ37456=4460=111227=BOND29703=MNPX167=NONE541=20251201225=20080626223=0.04375106=WILMINGTON DEL GO BDS 2008-A107=WILMINGTON DEL GO BDS 2008-A 4.375 12/1/25873=2008062654=138=10000064=2016062115=USD1=TEST660=99581=1126=20160616-16:37:00423=160=20160616-16:35:00297=1758=TIMED-OUT20117=36884415626=55627=Timed Out5630=None20120=C2D-RFQ-Open20066=368844020013=0.0155215=Y5625=25961=MNPrice21031=N21032=N10=184",
				@"8=FIXT.1.19=96135=R34=19449=MA52=20160616-16:36:28.03856=MDGSTAPI131=QuoteReqID-1466094988038-50669146=155=[N/A]48=5742162Z922=16360=Health454=1455=US5742162Z94456=4460=111227=BOND29703=MNPX167=NONE541=20380815225=19981217223=0.0525106=MARYLAND ST HEALTH  HIGHER EDL FACS AUTH REV BDS SER A107=MARYLAND ST HEALTH  HIGHER EDL FACS AUTH 5.250 8/15/38873=1998120154=138=10000064=2016062115=USD1=TEST660=99581=162=20160616-16:41:00126=20160616-16:39:0060=20160616-16:36:27423=1453=5448=rbcstpcl1447=D452=11802=1523=RBC Test STP Client1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1758=RGNL (N/A) requests  bid on $100,000 5742162Z9, due at 12:39 PM EDT, Multi-Dealers, .5625=220117=36884505961=MNPrice5626=55215=Y5627=Submitted5630=Respond, Pass20120=C2D-RFQ-Open21031=N21032=N20066=368844920067=120013=0.01510=017",
				@"8=FIXT.1.19=82535=AI34=20049=MA52=20160616-16:39:00.27956=MDGSTAPI453=5448=rbcstpcl1447=D452=11802=1523=RBC Test STP Client1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1755=[N/A]48=5742162Z922=16360=Health454=1455=US5742162Z94456=4460=111227=BOND29703=MNPX167=NONE541=20380815225=19981217223=0.0525106=MARYLAND ST HEALTH  HIGHER EDL FACS AUTH REV BDS SER A107=MARYLAND ST HEALTH  HIGHER EDL FACS AUTH 5.250 8/15/38873=1998120154=138=10000064=2016062115=USD1=TEST660=99581=1126=20160616-16:41:00423=160=20160616-16:39:00297=758=MDGS has failed to respond20117=36884505626=55627=Live5630=None20120=C2D-RFQ-Open20066=368844920013=0.0155215=Y5625=25961=MNPrice21031=N21032=N10=187",
				@"8=FIXT.1.19=81435=AI34=20149=MA52=20160616-16:39:00.28556=MDGSTAPI453=5448=rbcstpcl1447=D452=11802=1523=RBC Test STP Client1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1755=[N/A]48=5742162Z922=16360=Health454=1455=US5742162Z94456=4460=111227=BOND29703=MNPX167=NONE541=20380815225=19981217223=0.0525106=MARYLAND ST HEALTH  HIGHER EDL FACS AUTH REV BDS SER A107=MARYLAND ST HEALTH  HIGHER EDL FACS AUTH 5.250 8/15/38873=1998120154=138=10000064=2016062115=USD1=TEST660=99581=1126=20160616-16:41:00423=160=20160616-16:39:00297=1758=TIMED-OUT20117=36884505626=55627=Timed Out5630=None20120=C2D-RFQ-Open20066=368844920013=0.0155215=Y5625=25961=MNPrice21031=N21032=N10=017",
				@"8=FIXT.1.19=92735=R34=37549=MA52=20160616-18:06:15.99356=MDGSTAPI131=QuoteReqID-1466100375993-409175146=155=[N/A]48=971567KW122=16360=Various Purpose454=1455=US971567KW15456=4460=111227=BOND29703=MNPX167=NONE541=20190601225=20070531223=0.04106=WILMINGTON DEL GO BDS 2007A107=WILMINGTON DEL GO BDS 2007A 4.000 6/1/19873=2007053154=138=10000064=2016062115=USD1=TEST660=99581=162=20160616-18:11:00126=20160616-18:09:0060=20160616-18:06:15423=1453=5448=rbcstpcl1447=D452=11802=1523=RBC Test STP Client1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1758=RGNL (N/A) requests  bid on $100,000 971567KW1, due at 2:09 PM EDT, Multi-Dealers, .5625=220117=36885855961=MNPrice5626=55215=Y5627=Submitted5630=Respond, Pass20120=C2D-RFQ-Open21031=N21032=N20066=368858420067=120013=0.01510=128",
				@"8=FIXT.1.19=79135=AI34=38149=MA52=20160616-18:09:00.13056=MDGSTAPI453=5448=rbcstpcl1447=D452=11802=1523=RBC Test STP Client1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1755=[N/A]48=971567KW122=16360=Various Purpose454=1455=US971567KW15456=4460=111227=BOND29703=MNPX167=NONE541=20190601225=20070531223=0.04106=WILMINGTON DEL GO BDS 2007A107=WILMINGTON DEL GO BDS 2007A 4.000 6/1/19873=2007053154=138=10000064=2016062115=USD1=TEST660=99581=1126=20160616-18:11:00423=160=20160616-18:09:00297=758=MDGS has failed to respond20117=36885855626=55627=Live5630=None20120=C2D-RFQ-Open20066=368858420013=0.0155215=Y5625=25961=MNPrice21031=N21032=N10=027",
				@"8=FIXT.1.19=78035=AI34=38249=MA52=20160616-18:09:00.13156=MDGSTAPI453=5448=rbcstpcl1447=D452=11802=1523=RBC Test STP Client1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1755=[N/A]48=971567KW122=16360=Various Purpose454=1455=US971567KW15456=4460=111227=BOND29703=MNPX167=NONE541=20190601225=20070531223=0.04106=WILMINGTON DEL GO BDS 2007A107=WILMINGTON DEL GO BDS 2007A 4.000 6/1/19873=2007053154=138=10000064=2016062115=USD1=TEST660=99581=1126=20160616-18:11:00423=160=20160616-18:09:00297=1758=TIMED-OUT20117=36885855626=55627=Timed Out5630=None20120=C2D-RFQ-Open20066=368858420013=0.0155215=Y5625=25961=MNPrice21031=N21032=N10=117",
				@"8=FIXT.1.19=95035=R34=41949=MA52=20160616-18:27:12.43456=MDGSTAPI131=QuoteReqID-1466101632434-393594146=155=[N/A]48=956695VR822=16360=Utility454=1455=US956695VR80456=4460=111227=BOND29703=MNPX167=NONE541=20161101225=20060214223=0.04106=WEST VIRGINIA ST WTR DEV AUTH REF BDS 2006 A-II107=WEST VIRGINIA ST WTR DEV AUTH REF BDS 20 4.000 11/1/16873=2006021454=138=5000064=2016062115=USD1=TEST660=99581=162=20160616-18:31:00126=20160616-18:29:0060=20160616-18:27:12423=1453=5448=rbcstpcl1447=D452=11802=1523=RBC Test STP Client1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1758=RGNL (N/A) requests  bid on $50,000 956695VR8, due at 2:29 PM EDT, Multi-Dealers, .5625=220117=36886095961=MNPrice5626=55215=Y5627=Submitted5630=Respond, Pass20120=C2D-RFQ-Open21031=N21032=N20066=368860820067=120013=0.0110=212",
				@"8=FIXT.1.19=81535=AI34=42349=MA52=20160616-18:29:00.05556=MDGSTAPI453=5448=rbcstpcl1447=D452=11802=1523=RBC Test STP Client1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1755=[N/A]48=956695VR822=16360=Utility454=1455=US956695VR80456=4460=111227=BOND29703=MNPX167=NONE541=20161101225=20060214223=0.04106=WEST VIRGINIA ST WTR DEV AUTH REF BDS 2006 A-II107=WEST VIRGINIA ST WTR DEV AUTH REF BDS 20 4.000 11/1/16873=2006021454=138=5000064=2016062115=USD1=TEST660=99581=1126=20160616-18:31:00423=160=20160616-18:29:00297=758=MDGS has failed to respond20117=36886095626=55627=Live5630=None20120=C2D-RFQ-Open20066=368860820013=0.015215=Y5625=25961=MNPrice21031=N21032=N10=158",
				@"8=FIXT.1.19=80435=AI34=42449=MA52=20160616-18:29:00.05556=MDGSTAPI453=5448=rbcstpcl1447=D452=11802=1523=RBC Test STP Client1803=9448=ML-PEND447=C452=13448=STP Capital Management, Inc.447=D452=13448=MDGS447=C452=17802=1523=0103803=17448=Middlegate Securities Ltd447=D452=1755=[N/A]48=956695VR822=16360=Utility454=1455=US956695VR80456=4460=111227=BOND29703=MNPX167=NONE541=20161101225=20060214223=0.04106=WEST VIRGINIA ST WTR DEV AUTH REF BDS 2006 A-II107=WEST VIRGINIA ST WTR DEV AUTH REF BDS 20 4.000 11/1/16873=2006021454=138=5000064=2016062115=USD1=TEST660=99581=1126=20160616-18:31:00423=160=20160616-18:29:00297=1758=TIMED-OUT20117=36886095626=55627=Timed Out5630=None20120=C2D-RFQ-Open20066=368860820013=0.015215=Y5625=25961=MNPrice21031=N21032=N10=247",

				/*
				//Bad Checksum
				@"8=FIX.4.29=6335=A49=FABKOM56=WEDB34=98352=20160328-18:25:4298=0108=3010=666",
				@"8=FIX.4.29=6335=A49=FABKOM56=WEDB34=98352=20160328-18:25:4298=0108=3010=128",
				@"8=FIX.4.49=24435=s34=549=sender52=20060319-09:08:20.88156=target22=840=244=948=ABC55=ABC60=20060319-09:08:19548=184214549=2550=0552=254=138=9453=2448=8447=D452=4448=AAA35777447=D452=354=238=9453=2448=8447=D452=4448=aaa447=D452=310=1008=FIX.4.49=24435=s34=549=sender52=20060319-09:08:20.88156=target22=840=244=948=ABC55=ABC60=20060319-09:08:19548=184214549=2550=0552=254=138=9453=2448=8447=D452=4448=AAA35777447=D452=354=238=9453=2448=8447=D452=4448=aaa447=D452=310=1008=FIX.4.49=24435=s34=549=sender52=20060319-09:08:20.88156=target22=840=244=948=ABC55=ABC60=20060319-09:08:19548=184214549=2550=0552=254=138=9453=2448=8447=D452=4448=AAA35777447=D452=354=238=9453=2448=8447=D452=4448=aaa447=D452=310=1008=FIX.4.49=24435=s34=549=sender52=20060319-09:08:20.88156=target22=840=244=948=ABC55=ABC60=20060319-09:08:19548=184214549=2550=0552=254=138=9453=2448=8447=D452=4448=AAA35777447=D452=354=238=9453=2448=8447=D452=4448=aaa447=D452=310=100",
				@"8=FIX.4.29=6635=234=34349=WEDB52=20160328-18:25:44.12556=FABKOM7=92316=010=001",
				@"8=FIX.4.29=6935=449=FABKOM56=WEDB52=20160328-18:25:4434=92343=Y123=Y36=98410=211",
				@"8=FIX.4.29=5135=049=FABKOM56=WEDB34=98452=20160328-18:26:1210=082",
				@"8=FIX.4.29=5535=034=34449=WEDB52=20160328-18:26:14.95856=FABKOM10=034",
				@"8=FIX.4.29=6135=149=FABKOM56=WEDB34=98552=20160328-18:26:19112=HELLO10=162",
				@"8=FIX.4.29=6535=034=34549=WEDB52=20160328-18:26:22.95856=FABKOM112=HELLO10=105",
				@"8=FIX.4.29=6335=A49=FABKOM56=WEDB34=98752=20160328-18:27:3098=0108=3010=131",
				@"8=FIX.4.29=6735=A34=34749=WEDB52=20160328-18:27:30.69456=FABKOM98=0108=3010=078",
				@"8=FIX.4.29=6635=234=34849=WEDB52=20160328-18:27:30.69456=FABKOM7=98616=010=023",
				@"8=FIX.4.29=6935=449=FABKOM56=WEDB52=20160328-18:27:3034=98643=Y123=Y36=98810=221",
				@"8=FIXT.1.19=091735=849=BLPSTP56=JEFFMATTSTP34=3626347=UTF-852=20160504-18:31:1060=20160504-18:31:10150=F31=100151=0541=2026021932=100000423=164=201605066=10037=VCON:20160504:50357:5157=7438=10000039=2159=709.17669=100460=3223=0.034514=10000015=USD75=20160504106=IBM CORP17=VCON:20160504:50357:5:12167=CORP48=459200JG7198=3739:20160504:50357:5470=US381=10000022=154=17014=2155=[N/A]236=0.034495675118=100709.17453=6448=9001447=D452=1448=14112330447=D452=11802=5523=14803=4523=JEFF DOLGOS803=9523=SAFETY HARBOR803=34523=US803=38523=13182636803=4000448=6204326447=D452=12802=3523=EVAN HOFFMAN803=9523=NEW YORK803=34523=US803=38448=JEFFREY MATTHEWS FINL GROUP, LLC.447=D452=13448=SXT447=D452=16448=6204326447=D452=36802=3523=EVAN HOFFMAN803=9523=NEW YORK803=34523=US803=38454=4455=US459200JG74456=4455=459200JG7456=1455=JK138051456=A455=IBM456=810=118"
				*/
			};

			FIXConverter fixConv = FIXConverter.CreateInstance(sFIXDictionary);

			foreach (var line in testData)
			{
				XElement xe = fixConv.BuildXMLFromString(line);
				Debug.WriteLine(xe.ToString());
				//string sjson = fixConv.BuildJSONFromString(line);
				//Debug.WriteLine(sjson);
				Debug.WriteLine(new string('-', 80));
			}
		}

		private static void Test2(string testDataFileName)
		{

			FIXConverter fixConv = FIXConverter.CreateInstance(sFIXDictionary);

			var sw = Stopwatch.StartNew();

			const Int32 BufferSize = 16384;
			int counter = 0, err_counter = 0;
			FileInfo f = new FileInfo(testDataFileName);
			long fileSize = f.Length;

			using (var fileStream = File.OpenRead(testDataFileName))
			using (var streamReader = new StreamReader(fileStream, Encoding.UTF8, true, BufferSize))
			{
				string line = null;
				Console.WriteLine(string.Format("Processing: {0}", testDataFileName));
				int cursorLeft = Console.CursorLeft;
				int cursorTop = Console.CursorTop;

				while ((line = streamReader.ReadLine()) != null)
				{
					try
					{
						sw.Stop();
						Console.SetCursorPosition(cursorLeft, cursorTop);
                        Console.WriteLine($"Line: {counter++,10}  File Stream Position: {(fileStream.Position / (fileSize * 1.0)) * 100}%");
						sw.Start();

						//XElement xe = fixConv.BuildXMLFromString(line);
						var sJSON = fixConv.BuildJSONFromString(line);

                        using (System.IO.StreamWriter file = new System.IO.StreamWriter(testDataFileName + ".out", true))
                        {
                            file.WriteLine(sJSON + Environment.NewLine);
                        }

                    }
					catch (Exception ex)
					{
						err_counter++;
						Debug.WriteLine("");
						Debug.WriteLine(new string('!', 80));
						Debug.WriteLine(line);
						Debug.WriteLine(new string('-', 80));
						Debug.WriteLine(ex.ToString());
						Debug.WriteLine(new string('!', 80));
						Debug.WriteLine("");
					}
					//Debug.WriteLine(xe.ToString());
					//Debug.WriteLine(new string('-', 80));
				}
			}
			sw.Stop();
			Console.WriteLine(string.Format("Processed: {0} records in {1} sec. Errors: [{2}]  ", counter, sw.ElapsedMilliseconds / 1000.00, err_counter));
			Console.WriteLine(string.Format("Avg Speed: {0}  Rec./sec.", (counter * 1.0 / (sw.ElapsedMilliseconds / 1000)).ToString("F3")));
			Console.WriteLine("");
		}


		private static void Test3(string testDataFileName)
		{
			FIXConverter fixConv = FIXConverter.CreateInstance(sFIXDictionary);

			var pfp = new QuickFIXLogFileProcessor()
			{
				FIXConverter = fixConv,
				FileName = testDataFileName
			};

			pfp.ProcessFileAsync();

		}



		static void Main(string[] args)
		{

            //Test1();
            
            //Test2(@"C:\DEV\FIX\QuickFixn.LogViewer\TestData\FIX.4.4-MAP_MIDD_PROD-MAP_BLP_PROD.messages.current.log");
            Test2(@"C:\DEV\FIX\QuickFixn.LogViewer\TestData\100FIX42.dat");
			
            //Test2(@"C:\Users\AlexD\Downloads\fix2json-master\fix2json-master\testfiles\42_order_single.txt");
			//Test2(@"C:\Users\AlexD\Downloads\fix2json-master\fix2json-master\testfiles\100FIX42.dat");
			//Test2(@"C:\DEV\FIX\QuickFixn.LogViewer\TestData\FIX.4.4-FABKOM_TO_RBC-RBC_TO_FABKOM.messages.current.log");
			
			//Test3(@"C:\DEV\FIX\QuickFixn.LogViewer\TestData\ABCDEF.txt");

			//Test3(@"C:\DEV\FIX\QuickFixn.LogViewer\TestData\FIX.4.4-FABKOM_TO_RBC-RBC_TO_FABKOM.messages.current.log");
			//Test3(@"C:\DEV\FIX\QuickFixn.LogViewer\TestData\FIX.4.4-FABKOM_TO_RBC-RBC_TO_FABKOM.messages.current.log");
			//Test3(@"C:\DEV\FIX\QuickFixn.LogViewer\TestData\WBNA.log");
			//Test3(@"C:\DEV\FIX\QuickFixn.LogViewer\TestData\WBNA2.log");
			Run();

			Console.WriteLine("Am I really Done?");
			Console.ReadKey();

		}

		private static FileSystemWatcher watcher = null;

		[PermissionSet(SecurityAction.Demand, Name = "FullTrust")]
		public static void Run()
		{
			string filePath = @"C:\Temp\QuickFixn_Converter\";

			watcher = new FileSystemWatcher();
			
			watcher.Path = filePath;

			/* Watch for changes in LastAccess and LastWrite times, and
			 the renaming of files or directories. */
			watcher.NotifyFilter = NotifyFilters.Size | NotifyFilters.FileName;
				//NotifyFilters.LastAccess 
				//NotifyFilters.LastWrite 
				//NotifyFilters.DirectoryName;
			
			
			// Only watch text files.
			watcher.Filter = "*.txt";
			watcher.IncludeSubdirectories = false;

			// Add event handlers.
			watcher.Changed += new FileSystemEventHandler(OnChanged);
			watcher.Created += new FileSystemEventHandler(OnChanged);
			watcher.Deleted += new FileSystemEventHandler(OnChanged);
			watcher.Renamed += new RenamedEventHandler(OnRenamed);

			// Begin watching.
			watcher.EnableRaisingEvents = true;
		}

		// Define the event handlers.
		private static void OnChanged(object source, FileSystemEventArgs e)
		{
			// Specify what is done when a file is changed, created, or deleted.
			Console.WriteLine("==> {0} [{1}] {2} {3}", DateTime.Now.ToLocalTime(), e.ChangeType, e.FullPath, source.GetType().ToString());
		}

		private static void OnRenamed(object source, RenamedEventArgs e)
		{
			// Specify what is done when a file is renamed.
			Console.WriteLine("File: {0} renamed to {1}", e.OldFullPath, e.FullPath);
		}

	}
}
